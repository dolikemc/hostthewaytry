{% load l10n static leaflet_tags i18n %}
<div class="w3-panel w3-center w3-amber" id="id_place_detail_name">
    <h3>{{ place.name }}</h3>
</div>
<div class="w3-row-padding" id="id_place_detail_info">
    <div class="w3-container w3-third w3-center">
        <img src="{% static 'img/' %}{{ place.picture }}" alt="Picture"
             style="max-height: 300px; width: 100%">
    </div>
    <div class="w3-third w3-padding">
        <div class="w3-bar">
            {{ place.generated_description }}
        </div>
        <div class="w3-bar">

            <i class="fa fa-bed w3-large w3-bar-item">  {{ place.beds }}</i>
            {% if place.private_bathroom %}
                <i class="fas fa-bath w3-large w3-bar-item"></i>
            {% endif %}

            {% if place.smoking %}
                <i class="fas fa-smoking w3-large w3-bar-item w3-text-green"></i>
            {% else %}
                <i class="fas fa-smoking-ban w3-large w3-bar-item w3-text-red"></i>
            {% endif %}
            <i class="fas fa-coffee w3-large w3-bar-item w3-text-brown">{{ place.meals }}</i>
            {% if place.wifi %}
                <i class="fas fa-wifi w3-latge w3-bar-item w3-text-blue"></i>
            {% else %}
                <div class="w3-bar-item>">No WiFi</div>
            {% endif %}
        </div>
        <div class="w3-container">
            Price per person:
            {% if place.price_low == place.price_high %}
                {{ place.price_low.normalize }} {{ place.currency }}
            {% else %}
                {{ place.price_low.normalize }} - {{ place.price_high.normalize }} {{ place.currency }}
            {% endif %}
        </div>

        <button onclick="document.getElementById('id_book_email_modal').style.display='block'"
                class="w3-button w3-amber" id="id_book_place">Book Place
        </button>
    </div>
    <div id="id_book_email_modal" class="w3-modal">
        <div class="w3-modal-content" style="display: block">
            <header class="w3-container w3-black">
                    <span onclick="document.getElementById('id_book_email_modal').style.display='none'"
                          class="w3-button w3-display-topright">&times;</span>
                <form id="id_book_email_form">
                    <table class="w3-table-all w3-amber">
                        <tr>
                            <th style="max-width: 120px; width: 40px"></th>
                            <th style="max-width: 400px; width: 120px"></th>
                        </tr>
                        <tr>
                            <td><label for="id_book_email_from">{% trans "Your Email:" %}</label></td>
                            {% if user.is_authenticated %}
                                <td><input id="id_book_email_from" type="email" readonly value="{{ user.email }}"></td>
                            {% else %}
                                <td><input id="id_book_email_from" type="email" required></td>
                            {% endif %}
                        </tr>
                        <tr>
                            <td><label for="id_book_email_to">{% trans "To:" %}</label></td>
                            <td><input id="id_book_email_to" type="email" value="{{ place.email }}" readonly
                                       style="width: 200px"></td>
                        </tr>
                        <tr>
                            <td><label for="id_book_email_message">Message:</label></td>
                            <td><input id="id_book_email_message" value="{% trans 'Do you have vaccancies' %}"
                                       type="text" style="height: 180px;"></td>
                        </tr>
                    </table>
                </form>

        </div>
    </div>
    <div class="w3-container w3-third">
        {% leaflet_map "detail_map" callback="window.map_init_place" settings_overrides='' %}
    </div>
    <div class="w3-panel w3-center">
        <h4>Prices</h4>
    </div>
    <table class="w3-table w3-bordered">
        <tr class="w3-amber">
            <th>Category</th>
            <th>Price</th>
            <th>Description</th>
        </tr>
        {% for price in place.price_set.all %}
            <tr>
                <td>{{ price.get_category_display }}</td>
                <td>{{ price.value }} {{ place.currency }}</td>
                <td>{{ price.description }}</td>
            </tr>
        {% endfor %}
    </table>
</div>